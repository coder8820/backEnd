<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head', { title: 'Your Favorites' }) %>

<body class="bg-gray-50 text-gray-800 font-sans">

    <%- include('../partials/navbar') %>

    <main class="max-w-7xl mx-auto px-6 py-12">

        <!-- Page Title -->
        <div class="mb-8">
            <h2 class="text-3xl font-bold">Your Favorites</h2>
            <p class="text-gray-500 mt-1">
                Homes you’ve saved ❤️
            </p>
        </div>

        <% if (registeredHomes && registeredHomes.length > 0) { %>

        <!-- Airbnb-style grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">

            <% registeredHomes.forEach(function(home) { %>

            <div class="group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition">

                <!-- Image -->
                <div class="relative">
                    <img src="<%= home.imageurl ? home.imageurl : '/images/home.jpg' %>"
                         class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105"
                         onerror="this.src='/images/home.jpg'" />

                    <!-- Heart Icon -->
                    <button class="absolute top-3 right-3 bg-white/90 p-2 rounded-full shadow hover:scale-110 transition">
                        ❤️
                    </button>
                </div>

                <!-- Content -->
                <div class="p-4">

                    <!-- Location + Rating -->
                    <div class="flex justify-between items-center mb-1">
                        <p class="font-medium text-sm truncate">
                            <%= home.location %>
                        </p>
                        <span class="text-sm flex items-center gap-1">
                            ⭐ <%= home.rating || '4.8' %>
                        </span>
                    </div>

                    <!-- Title -->
                    <h3 class="text-sm text-gray-600 truncate">
                        <%= home.housename %>
                    </h3>

                    <!-- Price -->
                    <p class="mt-2 text-sm">
                        <span class="font-semibold">$<%= home.price %></span>
                        <span class="text-gray-500"> / night</span>
                    </p>

                    <!-- Action -->
                    <a href="/booking/<%= home.id %>"
                       class="mt-4 block text-center text-sm font-medium
                              bg-rose-500 text-white py-2 rounded-lg
                              hover:bg-rose-600 transition">
                        Book now
                    </a>

                </div>
            </div>

            <% }); %>

        </div>

        <% } else { %>

        <!-- Empty State -->
        <div class="text-center mt-20">
            <p class="text-gray-500 text-lg">You haven’t saved any homes yet.</p>
            <a href="/"
               class="inline-block mt-4 text-rose-500 font-medium hover:underline">
                Explore homes
            </a>
        </div>

        <% } %>

    </main>

    <%- include('../partials/footer') %>

</body>
</html>
